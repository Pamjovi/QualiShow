let perguntas = JSON.parse(localStorage.getItem("perguntas")) || [];

// Pergunta padrão se não houver perguntas
if (perguntas.length === 0) {
  perguntas = [
    {
      pergunta: "Qual é a capital da França?",
      a: "Londres",
      b: "Berlim", 
      c: "Paris",
      d: "Lisboa",
      correta: "c"
    }
  ];
  localStorage.setItem("perguntas", JSON.stringify(perguntas));
}

let indiceAtual = 0;
const elementoPergunta = document.getElementById("pergunta");
const elementoOpcoes = document.getElementById("opcoes");
const somAcerto = document.getElementById("somAcerto");
const somErro = document.getElementById("somErro");

// Função para carregar a pergunta atual
function carregarPergunta() {
  // Verifica se há perguntas
  if (perguntas.length === 0) {
    elementoPergunta.innerHTML = "<h2>Nenhuma pergunta disponível</h2>";
    elementoOpcoes.innerHTML = "<p>Use o botão abaixo para adicionar perguntas</p>";
    return;
  }

  const perguntaAtual = perguntas[indiceAtual];
  
  // Aplica animação de fade
  elementoPergunta.classList.remove("fade");
  void elementoPergunta.offsetWidth; // Força o reflow
  elementoPergunta.classList.add("fade");
  
  // Define o texto da pergunta
  elementoPergunta.innerHTML = `<h2>${perguntaAtual.pergunta}</h2>`;
  
  // Limpa as opções anteriores
  elementoOpcoes.innerHTML = "";
  
  // Cria os botões de opção
  const opcoes = ['a', 'b', 'c', 'd'];
  opcoes.forEach(letra => {
    const botao = document.createElement("button");
    botao.textContent = `${letra.toUpperCase()}: ${perguntaAtual[letra]}`;
    botao.onclick = () => verificarResposta(letra, botao);
    elementoOpcoes.appendChild(botao);
  });
}

// Função para verificar a resposta
function verificarResposta(resposta, botaoClicado) {
  const perguntaAtual = perguntas[indiceAtual];
  const respostaCorreta = perguntaAtual.correta.toLowerCase();
  const todosBotoes = elementoOpcoes.getElementsByTagName("button");
  
  // Desabilita todos os botões
  Array.from(todosBotoes).forEach(botao => {
    botao.style.pointerEvents = "none";
  });
  
  // Verifica se acertou
  if (resposta.toLowerCase() === respostaCorreta) {
    somAcerto.play();
    botaoClicado.classList.add("correto");
  } else {
    somErro.play();
    botaoClicado.classList.add("errado");
    
    // Mostra a resposta correta
    Array.from(todosBotoes).forEach(botao => {
      if (botao.textContent.toLowerCase().startsWith(respostaCorreta + ":")) {
        botao.classList.add("correto");
      }
    });
  }
  
  // Avança para próxima pergunta após delay
  setTimeout(() => {
    indiceAtual = (indiceAtual + 1) % perguntas.length;
    carregarPergunta();
  }, 2000);
}

// Inicializa o jogo quando a página carrega
document.addEventListener('DOMContentLoaded', carregarPergunta);
 




 
  
